#:import Factory kivy.factory.Factory

#:set backg_color ( 0.88 , 0.98 , 0.99 , 1 )
#:set color_button ( 0.6 , 0.76 , 0.85 , 1 )
#:set color_button_2 ( 0.24 , 0.35 , 0.5 , 1 )
#:set color_spinner ( 0.6 , 0.76 , 0.85 , 1 )
#:set color_dropdown "atlas://data/images/defaulttheme/button_pressed"
#:set color_font   ( 0.16 , 0.2 , 0.25 , 1 )
#:set color_yes_no ( 0.93 , 0.42 , 0.3 , 1 )
#:set color_popup ( 0.94 , 0.51 , 0.33 , 1 )
#:set color_scroll ( 0.75 , 0.75 , 0.75 , 1 )

#:set font_factor_1 0.04
#:set font_factor_3 1
#:set font_factor_4 0.05

<MySpinnerOption@SpinnerOption>:
    background_normal: ''
    background_color: color_scroll
    color: color_font

<IDpopout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.6, 0.6
    separator_height: 0
    FloatLayout:
        background_normal: ''
        background_color: color_popup
        Label:
            text:"Raport o takiej L.P.\njuż istnieje!"
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'Zamknij'
            on_release: root.dismiss()

<datePopout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.6, 0.6
    separator_height: 0
    FloatLayout:
        background_normal: ''
        background_color: color_popup
        Label:
            text:"Niepoprawna data!"
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'Zamknij'
            on_release: root.dismiss()

<date2Popout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.6, 0.6
    separator_height: 0
    FloatLayout:
        background_normal: ''
        background_color: color_popup
        Label:
            text:"Data powrotu nie może być\nwcześniejsza od daty wyjazdu!"
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'Zamknij'
            on_release: root.dismiss()

<deletePopout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.7, 0.5
    separator_height: 0
    FloatLayout:
        Label:
            text:"Nie udało się usunąć,\nbrak połączenia z internetem.\nSpróbuj później."
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'Zamknij'
            on_release: root.dismiss()

<readyPopout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.7, 0.5
    separator_height: 0
    FloatLayout:
        Label:
            text:"Czy na pewno chcesz\noznaczyć raport\njako kompletny?"
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'OK'
            on_release: root.dismiss()

<userPopout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.6, 0.6
    separator_height: 0
    FloatLayout:
        background_normal: ''
        background_color: color_popup
        Label:
            text:"Błędne OSP lub hasło!"
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'Zamknij'
            on_release: root.dismiss()

<connectionPopout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.6, 0.6
    separator_height: 0
    FloatLayout:
        background_normal: ''
        background_color: color_popup
        Label:
            text:"Błąd połączenia z bazą!"
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'Zamknij'
            on_release: root.dismiss()

<changePopout@Popup>:
    auto_dismiss: False
    title: ''
    size: 400, 400
    size_hint: 0.6, 0.6
    separator_height: 0
    FloatLayout:
        background_normal: ''
        background_color: color_popup
        Label:
            text:"Czy na pewno zmienić OSP?\n Wymaże to lokalne raporty."
            font_size: (root.width**2 + root.height**2) / 12**4
            pos_hint: {"center_x":0.5, "center_y":0.6}
            size_hint: 0.6, 0.35
            halign: 'center'
            color: color_button
        Button:
            pos_hint:{"x":0.3,"y":0.1}
            size_hint: 0.4, 0.15
            font_size: (root.width**2 + root.height**2) / 12**4 * font_factor_3
            text: 'Rozumiem'
            on_release: root.dismiss()

<Login>:
    password: password
    user: user
    layout_content: layout_content
    FloatLayout:
        id: layout_content
        canvas.before:
            Color:
                rgba: backg_color
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text:"Zmienić jednostkę OSP?"
            font_size: root.width * font_factor_4
            pos_hint: {"x":0.25, "center_y":0.8}
            size_hint: 0.5, 0.3
            color: color_font
            bold: True
        TextInput:
            pos_hint: {"center_x":0.5, "center_y":0.60}
            size_hint: 0.6, 0.1
            id: user
            hint_text: "OSP"
            multiline: False
            halign: 'center'
            font_size: root.width * font_factor_4
        TextInput:
            pos_hint: {"center_x":0.5, "center_y":0.45}
            size_hint: 0.6, 0.1
            id: password
            hint_text: "hasło"
            password: True
            multiline: False
            halign: 'center'
            font_size: root.width * font_factor_4
        Button:
            pos_hint:{"x":0.55,"center_y":0.2}
            size_hint: 0.35, 0.1
            font_size: root.width * font_factor_4
            text: "Tak"
            on_release:
                root.change()
        Button:
            pos_hint:{"x":0.1,"center_y":0.2}
            size_hint: 0.35, 0.1
            font_size: root.width * font_factor_4
            text: "Nie"
            on_release:
                root.clear()
                root.manager.transition.direction = "right"
                app.root.current = "start"

<Password>:
    password: password
    layout_content: layout_content
    FloatLayout:
        id: layout_content
        canvas.before:
            Color:
                rgba: backg_color
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text:"Usunąć?"
            font_size: root.width * font_factor_4 *2
            pos_hint: {"x":0.25, "center_y":0.7}
            size_hint: 0.5, 0.3
            color: color_font
            bold: True
        TextInput:
            pos_hint: {"center_x":0.5, "center_y":0.5}
            size_hint: 0.6, 0.1
            id: password
            hint_text: "hasło"
            password: True
            multiline: False
            halign: 'center'
            font_size: root.width * font_factor_4
        Button:
            pos_hint:{"x":0.55,"center_y":0.2}
            size_hint: 0.35, 0.1
            font_size: root.width * font_factor_4
            text: "Tak"
            on_release:
                root.delete()
        Button:
            pos_hint:{"x":0.1,"center_y":0.2}
            size_hint: 0.35, 0.1
            font_size: root.width * font_factor_4
            text: "Nie"
            on_release:
                root.clear()
                root.manager.transition.direction = "right"
                app.root.current = "edit"

<PasswordAll>:
    password: password
    layout_content: layout_content
    FloatLayout:
        id: layout_content
        canvas.before:
            Color:
                rgba: backg_color
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text:"Usunąć wszystkie?"
            font_size: root.width * font_factor_4 *2
            pos_hint: {"x":0.25, "center_y":0.7}
            size_hint: 0.5, 0.3
            color: color_font
            bold: True
        TextInput:
            pos_hint: {"center_x":0.5, "center_y":0.5}
            size_hint: 0.6, 0.1
            id: password
            hint_text: "hasło"
            password: True
            multiline: False
            halign: 'center'
            font_size: root.width * font_factor_4
        Button:
            pos_hint:{"x":0.55,"center_y":0.2}
            size_hint: 0.35, 0.1
            font_size: root.width * font_factor_4
            text: "Tak"
            on_release:
                root.delete()
        Button:
            pos_hint:{"x":0.1,"center_y":0.2}
            size_hint: 0.35, 0.1
            font_size: root.width * font_factor_4
            text: "Nie"
            on_release:
                root.clear()
                root.manager.transition.direction = "right"
                app.root.current = "browser"

<StartWindow>:
    FloatLayout:
        canvas.before:
            Color:
                rgba: backg_color
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            text:"Raporty OSP"
            font_size: self.width /5
            pos_hint: {"x":0.25, "y":0.8}
            size_hint: 0.5, 0.2
            color: color_font
            bold: True
        Image:
            source: 'truck1.png'
            pos_hint: {"center_x":0.5, "center_y":0.65}
            size_hint: 0.3, 0.3
        Button:
            pos_hint:{"center_x":0.5,"center_y":0.5}
            size_hint: 0.75, 0.10
            font_size: self.width /15
            text: "Nowy raport"
            bold: True
            color: color_font
            background_normal: ''
            background_color: color_yes_no
            on_release:
                root.manager.transition.direction = "down"
                app.root.current = "create"
        Image:
            source: 'list2.png'
            pos_hint: {"center_x":0.5, "center_y":0.31}
            size_hint: 0.3, 0.2
        Button:
            pos_hint:{"center_x":0.5,"center_y":0.15}
            size_hint: 0.75, 0.10
            font_size: self.width /15
            text: "Przeglądaj raporty"
            bold: True
            color: color_font
            background_normal: ''
            background_color: color_button
            on_release:
                root.manager.transition.direction = "up"
                app.root.current = "browser"
        Button:
            pos_hint:{"center_x":0.1,"center_y":0.95}
            size_hint: 0.15, 0.05
            font_size: self.width /8
            text: "Zmień OSP"
            bold: False
            color: color_font
            background_normal: ''
            background_color: color_button
            on_release:
                root.manager.transition.direction = "left"
                app.root.current = "login"


<CreateReport>:
    id_number: id_number
    dep_date_d:dep_date_d
    dep_date_m:dep_date_m
    dep_date_y: dep_date_y
    location: location
    type_of_action: type_of_action
    section_com: section_com
    action_com: action_com
    driver: driver
    perpetrator: perpetrator
    victim: victim
    section: section
    details: details
    return_date_y: return_date_y
    return_date_m: return_date_m
    return_date_d: return_date_d
    stan_licznika: stan_licznika
    km_location: km_location
    scroll_id: scroll_id
    checkbox: checkbox

    layout_content: layout_content
    BoxLayout:
        canvas.before:
            Color:
                rgba: backg_color
            Rectangle:
                pos: self.pos
                size: self.size
        id: bl
        orientation: 'vertical'
        padding: 10, 10
        row_default_height: '48dp'
        row_force_default: True
        spacing: 10, 10
        ScrollView:
            id: scroll_id
            size: self.size
            GridLayout:
                id: layout_content
                size_hint_y: None
                cols: 1
                row_default_height: '80dp'
                row_force_default: True
                spacing: 0, 10
                padding: 0.1, 0.1
                Label:
                    text: "Podaj szczegóły raportu"
                    font_size: root.width/12
                    color: color_font
                    bold: True
                GridLayout:
                    cols: 2
                    Label:
                        size_hint: 0.35, 0.1
                        text: "L.P.:"
                        font_size: root.width * font_factor_1
                        color: color_font
                    TextInput:
                        id: id_number
                        size_hint: 0.35, 0.1
                        input_filter: "int"
                        hint_text: "L.P."
                        halign: 'center'
                        multiline: False
                        font_size: root.width * font_factor_1
                GridLayout:
                    cols: 4
                    spacing: [2,0]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text:"Data\nwyjazdu:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: dep_date_d
                        values: ["dzisiaj", "01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31",""]
                        on_text: root.on_spinner_select_depdate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: dep_date_m
                        values: ["dzisiaj","01","02","03","04","05","06","07","08","09","10","11","12",""]
                        on_text: root.on_spinner_select_depdate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: dep_date_y
                        on_text: root.on_spinner_select_depdate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    spacing: [3,3]
                    cols: 3
                    Label:
                        color: color_font
                        text: "Godzina\nwyjazdu:"
                        font_size: root.width * font_factor_1
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: dep_time_h
                        values: ["teraz","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23", ""]
                        on_text: root.on_spinner_select_deptime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: dep_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55", ""]
                        on_text: root.on_spinner_select_deptime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 3
                    spacing: [3,3]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Na miejscu:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: spot_time_h
                        values: ["teraz", "00", "01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23",""]
                        on_text: root.on_spinner_select_spottime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: spot_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55",""]
                        on_text: root.on_spinner_select_spottime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                TextInput:
                    size_hint: 0.35, 0.1
                    id: location
                    hint_text: "Miejsce zdarzenia"
                    multiline: False
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: type_of_action
                    hint_text: "Rodzaj zdarzenia:"
                    multiline: False
                    font_size: root.width * font_factor_1
                Spinner:
                    id: section_com
                    text: "Dowódca sekcji"
                    size_hint: 0.35, 0.1
                    size: 100, 44
                    background_normal: ''
                    background_color: color_spinner
                    color: color_font
                    font_size: root.width * font_factor_1
                    option_cls: Factory.get("MySpinnerOption")
                Spinner:
                    id: action_com
                    text:"Dowódca akcji"
                    size_hint: 0.35, 0.1
                    size: 100, 44
                    background_normal: ''
                    background_color: color_spinner
                    color: color_font
                    font_size: root.width * font_factor_1
                    option_cls: Factory.get("MySpinnerOption")
                Spinner:
                    id: driver
                    text: "Kierowca"
                    size_hint: 0.35, 0.1
                    size: 100, 44
                    background_normal: ''
                    background_color: color_spinner
                    color: color_font
                    font_size: root.width * font_factor_1
                    option_cls: Factory.get("MySpinnerOption")
                TextInput:
                    size_hint: 0.35, 0.1
                    id: perpetrator
                    hint_text: "Sprawca:"
                    multiline: False
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: victim
                    hint_text: "Poszkodowany:"
                    multiline: False
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: section
                    hint_text: "Sekcja:"
                    multiline: True
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: details
                    hint_text: "Szczegóły:"
                    multiline: True
                    font_size: root.width * font_factor_1
                GridLayout:
                    cols: 4
                    spacing: [2,0]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Data\npowrotu:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: return_date_d
                        values: ["dzisiaj", "01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31",""]
                        on_text: root.on_spinner_select_returndate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: return_date_m
                        values: ["dzisiaj","01","02","03","04","05","06","07","08","09","10","11","12",""]
                        on_text: root.on_spinner_select_returndate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: return_date_y
                        on_text: root.on_spinner_select_returndate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 3
                    spacing: [3,3]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Godzina\nzakończenia:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: end_time_h
                        values: ["teraz", "00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23",""]
                        on_text: root.on_spinner_select_endtime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: end_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55",""]
                        on_text: root.on_spinner_select_endtime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 3
                    spacing: [3,3]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Godzina\nw remizie:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: home_time_h
                        values: ["teraz","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23",""]
                        on_text: root.on_spinner_select_hometime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: home_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55",""]
                        on_text: root.on_spinner_select_hometime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 2
                    spacing: [2,0]
                    TextInput:
                        size_hint: 0.35, 0.1
                        id: stan_licznika
                        hint_text: "Stan licznika:"
                        input_filter: "int"
                        multiline: False
                        font_size: root.width * font_factor_1
                        color: color_font
                    TextInput:
                        size_hint: 0.35, 0.1
                        id: km_location
                        hint_text: "KM do miejsca zdarzenia:"
                        multiline: False
                        input_filter: "int"
                        font_size: root.width * font_factor_1
                        color: color_font
                GridLayout:
                    cols: 2
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Kompletny?"
                    Spinner:
                        id: checkbox
                        font_size: root.width * font_factor_1
                        values: ["Nie", "Tak"]
                        background_normal: ''
                        background_color: color_yes_no
                        color: color_font
                        option_cls: Factory.get("MySpinnerOption")
                        on_text: root.on_spinner_select(self.text)
                Button:
                    size_hint: 0.35, 0.1
                    text: "Zapisz"
                    color: backg_color
                    background_normal: ''
                    background_color: color_button_2
                    font_size: root.width * font_factor_1
                    on_release:
                        root.submit()
                Button:
                    size_hint: 0.35, 0.1
                    text: "Anuluj"
                    color: backg_color
                    background_normal: ''
                    background_color: color_button_2
                    font_size: root.width * font_factor_1
                    on_release:
                        root.clear()
                        root.manager.transition.direction = "up"
                        app.root.current = "start"
                Label:
                    text: ""
                Label:
                    text: ""

<EditReport>:
    uuid_num: uuid_num
    id_number: id_number
    dep_date_d:dep_date_d
    dep_date_m:dep_date_m
    dep_date_y: dep_date_y
    location: location
    type_of_action: type_of_action
    section_com: section_com
    action_com: action_com
    driver: driver
    perpetrator: perpetrator
    victim: victim
    section: section
    details: details
    return_date_y: return_date_y
    return_date_m: return_date_m
    return_date_d: return_date_d
    stan_licznika: stan_licznika
    km_location: km_location
    modDate: modDate
    scroll_id: scroll_id
    checkbox: checkbox

    layout_content: layout_content
    BoxLayout:
        canvas.before:
            Color:
                rgba: backg_color
            Rectangle:
                pos: self.pos
                size: self.size
        id: bl
        orientation: 'vertical'
        padding: 10, 10
        row_default_height: '48dp'
        row_force_default: True
        spacing: 10, 10
        ScrollView:
            id: scroll_id
            size: self.size
            GridLayout:
                id: layout_content
                size_hint_y: None
                cols: 1
                row_default_height: '80dp'
                row_force_default: True
                spacing: 0, 10
                padding: 0.1, 0.1
                Label:
                    text: "Edycja raportu"
                    font_size: root.width/12
                    color: color_font
                    bold: True
                GridLayout:
                    cols: 2
                    Label:
                        text: "Data ostatniej\nmodyfikacji:"
                        font_size: root.width * font_factor_1
                        color: color_font
                        bold: True
                        halign: 'center'
                    Label:
                        id: modDate
                        font_size: root.width * font_factor_1
                        color: color_font
                        halign: 'center'
                GridLayout:
                    cols: 2
                    Label:
                        size_hint: 0.35, 0.1
                        text: "L.P.:"
                        font_size: root.width * font_factor_1
                        color: color_font
                    TextInput:
                        id: id_number
                        size_hint: 0.35, 0.1
                        input_filter: "int"
                        hint_text: "L.P."
                        halign: 'center'
                        multiline: False
                        font_size: root.width * font_factor_1
                GridLayout:
                    cols: 4
                    spacing: [2,0]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Data\nwyjazdu:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: dep_date_d
                        values: ["dzisiaj", "01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31",""]
                        on_text: root.on_spinner_select_depdate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: dep_date_m
                        values: ["dzisiaj","01","02","03","04","05","06","07","08","09","10","11","12",""]
                        on_text: root.on_spinner_select_depdate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: dep_date_y
                        on_text: root.on_spinner_select_depdate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    spacing: [3,3]
                    cols: 3
                    Label:
                        color: color_font
                        text: "Godzina\nwyjazdu:"
                        font_size: root.width * font_factor_1
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: dep_time_h
                        values: ["teraz","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23", ""]
                        on_text: root.on_spinner_select_deptime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: dep_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55", ""]
                        on_text: root.on_spinner_select_deptime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 3
                    spacing: [3,3]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Na miejscu:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: spot_time_h
                        values: ["teraz","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23", ""]
                        on_text: root.on_spinner_select_spottime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: spot_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55",""]
                        on_text: root.on_spinner_select_spottime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                TextInput:
                    size_hint: 0.35, 0.1
                    id: location
                    hint_text: "Miejsce zdarzenia:"
                    multiline: False
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: type_of_action
                    hint_text: "Rodzaj zdarzenia:"
                    multiline: False
                    font_size: root.width * font_factor_1
                Spinner:
                    id: section_com
                    text: "Dowódca sekcji"
                    size_hint: 0.35, 0.1
                    size: 100, 44
                    background_normal: ''
                    background_color: color_spinner
                    color: color_font
                    font_size: root.width * font_factor_1
                    option_cls: Factory.get("MySpinnerOption")
                Spinner:
                    id: action_com
                    text:"Dowódca akcji"
                    size_hint: 0.35, 0.1
                    size: 100, 44
                    background_normal: ''
                    background_color: color_spinner
                    color: color_font
                    font_size: root.width * font_factor_1
                    option_cls: Factory.get("MySpinnerOption")
                Spinner:
                    id: driver
                    text: "Kierowca"
                    size_hint: 0.35, 0.1
                    size: 100, 44
                    background_normal: ''
                    background_color: color_spinner
                    color: color_font
                    font_size: root.width * font_factor_1
                    option_cls: Factory.get("MySpinnerOption")
                TextInput:
                    size_hint: 0.35, 0.1
                    id: perpetrator
                    hint_text: "Sprawca:"
                    multiline: False
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: victim
                    hint_text: "Poszkodowany:"
                    multiline: False
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: section
                    hint_text: "Sekcja:"
                    multiline: True
                    font_size: root.width * font_factor_1
                TextInput:
                    size_hint: 0.35, 0.1
                    id: details
                    hint_text: "Szczegóły:"
                    multiline: True
                    font_size: root.width * font_factor_1
                GridLayout:
                    cols: 4
                    spacing: [2,0]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Data\npowrotu:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: return_date_d
                        values: ["dzisiaj", "01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31",""]
                        on_text: root.on_spinner_select_returndate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: return_date_m
                        values: ["dzisiaj","01","02","03","04","05","06","07","08","09","10","11","12",""]
                        on_text: root.on_spinner_select_returndate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: return_date_y
                        on_text: root.on_spinner_select_returndate(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 3
                    spacing: [3,3]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Godzina\nzakończenia:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: end_time_h
                        values: ["teraz","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23", ""]
                        on_text: root.on_spinner_select_endtime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: end_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55",""]
                        on_text: root.on_spinner_select_endtime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 3
                    spacing: [3,3]
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Godzina\nw remizie:"
                        text_size: self.size
                        halign: 'left'
                        valign: 'middle'
                    Spinner:
                        id: home_time_h
                        values: ["teraz","00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23", ""]
                        on_text: root.on_spinner_select_hometime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                    Spinner:
                        id: home_time_m
                        values: ["teraz","00", "05","10","15","20","25","30","35","40","45","50","55",""]
                        on_text: root.on_spinner_select_hometime(self.text)
                        background_normal: ''
                        background_color: color_spinner
                        color: color_font
                        font_size: root.width * font_factor_1
                        option_cls: Factory.get("MySpinnerOption")
                GridLayout:
                    cols: 2
                    spacing: [2,0]
                    TextInput:
                        size_hint: 0.35, 0.1
                        id: stan_licznika
                        hint_text: "Stan licznika:"
                        input_filter: "int"
                        multiline: False
                        font_size: root.width * font_factor_1
                        color: color_font
                    TextInput:
                        size_hint: 0.35, 0.1
                        id: km_location
                        hint_text: "KM do miejsca zdarzenia:"
                        multiline: False
                        input_filter: "int"
                        font_size: root.width * font_factor_1
                        color: color_font
                GridLayout:
                    cols: 2
                    Label:
                        font_size: root.width * font_factor_1
                        color: color_font
                        text: "Kompletny?"
                    Spinner:
                        id: checkbox
                        font_size: root.width * font_factor_1
                        values: ["Nie", "Tak"]
                        background_normal: ''
                        background_color: color_yes_no
                        color: color_font
                        option_cls: Factory.get("MySpinnerOption")
                        on_text: root.on_spinner_select(self.text)
                Button:
                    size_hint: 0.35, 0.1
                    text: "Zapisz"
                    color: backg_color
                    background_normal: ''
                    background_color: color_button_2
                    font_size: root.width * font_factor_1
                    on_release:
                        root.submit()
                Button:
                    size_hint: 0.35, 0.1
                    text: "Anuluj"
                    color: backg_color
                    background_normal: ''
                    background_color: color_button_2
                    font_size: root.width * font_factor_1
                    on_release:
                        root.clear()
                        root.manager.transition.direction = "right"
                        app.root.current = "browser"
                Button:
                    id: del_but
                    size_hint: 0.35, 0.1
                    color: color_font
                    background_normal: ''
                    background_color: color_yes_no
                    font_size: root.width * font_factor_1
                    text: "Usuń"
                    on_release:
                        root.try_delete()
                Label:
                    text: ""
                Label:
                    id: uuid_num
                    text: "UUID:"
                    font_size: root.width * font_factor_1 /1.5
                    color: color_font


<Browser>:
    name: "browser"
    id1: id1
    layout_content: layout_content
    cancel_but: cancel_but
    BoxLayout:
        canvas.before:
            Color:
                rgba: backg_color
            Rectangle:
                pos: self.pos
                size: self.size
        orientation: 'vertical'
        padding: 10, 10
        row_default_height: '48dp'
        row_force_default: True
        spacing: 10, 10
        ScrollView:
            size: self.size
            GridLayout:
                id: layout_content
                size_hint_y: None
                cols: 1
                row_default_height: '55dp'
                row_force_default: True
                spacing: [0, 5]
                padding: 0, 0
                Label:
                    id: id1
                    text: "Wybierz raport do edycji:"
                    font_size: root.width /16
                    color: color_font
                Button:
                    id: cancel_but
                    font_size: root.width /28
                    text: "Anuluj"
                    color: color_font
                    background_normal: ''
                    background_color: color_button
                    background_down: color_dropdown
                    on_release:
                        root.cancel()